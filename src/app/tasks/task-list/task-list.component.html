<div class="p-4">
    <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-semibold">Tasks</h2>
        <button class="px-3 py-1 rounded bg-blue-600 text-white cursor-pointer" (click)="add()">+ New</button>
    </div>

    @if (loading) {
    <div class="p-4">Loadingâ€¦</div>
    }
    @if (error) {
    <div class="text-red-500">{{ error }}</div>
    }

    <table class="min-w-full table-auto border">
        <thead>
            <tr class="bg-gray-100">
                <th class="p-2 text-left">Title</th>
                <th class="p-2 text-left">Description</th>
                <th class="p-2">Status</th>
                <th class="p-2">Actions</th>
            </tr>
        </thead>
        <tbody>
            @for (task of tasks; track task.id) {
            <tr class="border-t hover:bg-gray-50">
                <td class="p-2">
                    <a (click)="view(task)" class="cursor-pointer text-blue-600 hover:underline">{{ task.title }}</a>
                </td>
                <td class="p-2">{{ task.description }}</td>
                <td class="p-2 text-center">
                    <span class="px-2 py-1 rounded"
                        [ngClass]="task.completed ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'">
                        {{ task.completed ? 'Completed' : 'Pending' }}
                    </span>
                </td>
                <td class="p-2 flex gap-2 justify-center">
                    <button class="px-2 py-1 rounded border cursor-pointer" (click)="edit(task)">Edit</button>
                    <button class="px-2 py-1 rounded border text-red-600 cursor-pointer" (click)="deleteTask(task)">Delete</button>
                </td>
            </tr>
            }
            @if (tasks.length === 0) {
            <tr>
                <td colspan="4" class="p-4 text-center text-gray-500">No Record Found</td>
            </tr>
            }
        </tbody>
    </table>
</div>